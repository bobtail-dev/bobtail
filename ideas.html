<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="styles/9981d504.main.css" media="screen">
    <title>Ideas - bobtail</title>
  </head>
  <body>
    <header>
      <div class="overlay"></div>
      <div class="inner">
        <h1 class="smaller-title"><a href="/reactive-coffee/">bobtail</a></h1>
        <nav class="top-nav">
          <div class="inner-inner"><a href="quickstart.html">Documentation</a><a href="support.html">Community/Support</a><a href="design.html">Rationale</a><a href="dev-setup.html">Development</a></div>
        </nav>
      </div>
    </header>
    <div id="content-wrapper">
      <div class="inner clearfix">
        <nav class="side-nav">
          <ul>
            <li><a href="dev-setup.html">Dev Setup</a></li>
            <li><a href="infelicities.html">Infelicities</a></li>
            <li><a href="ideas.html" class="current">Ideas</a><ul class="toc"><li><a href="#object-observe">Object.observe</a></li><li><a href="#dirty-tracking-re-rendering-analysis">Dirty-Tracking Re-Rendering Analysis</a></li><li><a href="#network-data-bindings">Network Data Bindings</a></li></ul></li>
            <li><a href="https://github.com/inferinc/bobtail">GitHub</a></li>
          </ul>
        </nav>
        <section id="main-content"><h1 id="ideas">Ideas</h1>
<h2 id="object-observe"><a name="object-observe">Object.observe</a></h2>
<p>A platform feature looming on the horizon of ECMAScript is that of
<a href="http://updates.html5rocks.com/2012/11/Respond-to-change-with-Object-observe"><code>Object.observe</code></a>, which allows for reacting to mutation events on objects
without needing explicit syntax for it, e.g.:</p>
<div class="highlight"><pre><span class="nv">x = </span><span class="mi">0</span>
<span class="nv">foo.x = </span><span class="mi">3</span>
</pre></div>

<p>vs.</p>
<div class="highlight"><pre><span class="nv">x = </span><span class="nx">rx</span><span class="p">.</span><span class="nx">cell</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="nx">x</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

<p>The main benefit here is that you needn&#39;t sprinkle <code>rx.cell</code> annotations
everywhere and you can re-use existing code that mutates objects normally
without going through <code>.set</code>.  This similarly means that bindings do not need
to explicitly call <code>.get</code>, and instead can assume a <code>.get</code> on any variable
access.</p>
<p>[Angular] and other frameworks support free-form models, but must do additional
work to re-compute what has actually changed.  The [Polymer] framework
pioneered support for <code>Object.observe</code>, but as of this writing it&#39;s not a
widely supported feature (only available in Chrome Canary) and the framework
has a more expensive fallback.</p>
<h2 id="dirty-tracking-re-rendering-analysis"><a name="dirty-tracking-re-rendering-analysis">Dirty-Tracking Re-Rendering Analysis</a></h2>
<p>The fine-grained control over re-rendering and bindings is powerful, but for
bindings that are non-performance-critical or don&#39;t need to scale, it&#39;s less
effort to not have to selectively decide where those bindings exist.  Simply
make everything dynamically bound, and then with events being used only to
determine what parts of the model have been dirtied, we can instead let the
framework compute optimal set(s) of the DOM to re-render automatically.</p>
<p>Once everything is a binding, slightly modified/more scalable syntax and idioms
may be warranted, so that instead of:</p>
<div class="highlight"><pre><span class="nx">ul</span> <span class="p">{</span><span class="k">class</span><span class="o">:</span> <span class="p">(</span><span class="nx">bind</span> <span class="nf">-&gt;</span> <span class="s">&quot;biglist&quot;</span><span class="p">),</span> <span class="nv">style: </span><span class="p">(</span><span class="nx">bind</span> <span class="nf">-&gt;</span> <span class="s">&quot;display: </span><span class="si">#{</span><span class="nx">shown</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)},</span> <span class="nx">xs</span><span class="p">.</span><span class="nx">map</span> <span class="nf">(x) -&gt;</span>
  <span class="nx">li</span> <span class="p">{},</span> <span class="nx">bind</span> <span class="nf">-&gt;</span> <span class="p">[</span><span class="s">&quot;</span><span class="si">#{</span><span class="nx">x</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="s">&quot;</span><span class="p">]</span>
</pre></div>

<p>we write:</p>
<div class="highlight"><pre><span class="nx">ul</span> <span class="p">{</span>
  <span class="k">class</span><span class="o">:</span> <span class="nf">-&gt;</span> <span class="s">&quot;biglist&quot;</span>
  <span class="nv">style: </span><span class="nf">-&gt;</span> <span class="s">&quot;display: </span><span class="si">#{</span><span class="nx">shown</span><span class="si">}</span><span class="s">&quot;</span>
  <span class="nv">contents: </span><span class="nx">xs</span><span class="p">.</span><span class="nx">map</span> <span class="nf">(x) -&gt;</span>
    <span class="nx">li</span> <span class="p">{</span> <span class="nv">contents: </span><span class="nf">-&gt;</span> <span class="p">[</span><span class="s">&quot;</span><span class="si">#{</span><span class="nx">x</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="s">&quot;</span><span class="p">]</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>A related idea for even simpler applications is to
throw away all observables and bindings, and re-build the entire view on every
change to the model via an API that mirrors <code>rxt</code> except for returning
lightweight DOM representations.  By computing the diff between DOM
representations (rather than tracking dirtiness of bindings), the actual
DOM operations can be determined.</p>
<h2 id="network-data-bindings"><a name="network-data-bindings">Network Data Bindings</a></h2>
<p>This is flexible, but it would be convenient to have some implementations of
Comet- or WebSocket-based push mechanisms that works well with various
server-side frameworks.</p>

        </section>
      </div>
    </div><!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-41900480-1', 'yang.github.io');
      ga('send', 'pageview');
    </script>
    <footer>
      <div class="inner"><p>Copyright 2017 Bobtail/Reactive Coffee Authors.<br>Code licensed under <a href="https://github.com/inferinc/bobtail/blob/master/LICENSE">MIT License</a>.  Documentation licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.<br>Website design based on Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>

      </div>
    </footer>
  </body>
</html>
