{"version":3,"sources":["../src/main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import $ from \"jquery\";\nimport \"es5-shim\";\nimport \"es6-shim\";\nimport _ from \"underscore\";\nimport * as rx from \"bobtail-rx\";\n\n$.fn.rx = function(prop) {\n  let map = this.data(\"rx-map\");\n  if ((map == null)) {\n    this.data(\"rx-map\", (map = Object.create(null)));\n  }\n  if (!(prop in map)) {\n    switch (prop) {\n    case \"focused\": {\n      let focused = rx.cell(this.is(\":focus\"));\n      this.focus(() => focused.set(true));\n      this.blur(() => focused.set(false));\n      map[prop] = focused;\n      break;\n    }\n    case \"val\": {\n      let val = rx.cell(this.val());\n      this.change(() => val.set(this.val()));\n      this.on(\"input\", () => val.set(this.val()));\n      map[prop] = val;\n      break;\n    }\n    case \"checked\": {\n      let checked = rx.cell(this.is(\":checked\"));\n      this.change(() => checked.set(this.is(\":checked\")));\n      map[prop] = checked;\n      break;\n    }\n    default: {\n      throw new Error(\"Unknown reactive property type\");\n    }\n    }\n  }\n  return map[prop];\n};\n\n//\n// reactive template DSL\n//\nconst autoFuncBind = (x) => _.isFunction(x) ? rx.bind(x) : x;\n\nconst flattenWeb = (x) => rx.flatten(x, rxtFlattenHelper);\n\nconst rxtFlattenHelper = x =>\n  _.isFunction(x)\n    ? rxtFlattenHelper(x())\n    : rx.flattenHelper(x, rxtFlattenHelper);\n\nconst prepContents = function(contents) {\n  if (\n    contents instanceof rx.ObsCell ||\n    contents instanceof rx.ObsArray ||\n    _.isArray(contents) ||\n    _.isFunction(contents)\n  ) {\n    contents = flattenWeb(contents);\n  }\n  return contents;\n};\n\nlet events = {};\nevents.enabled = false;\nevents.onElementChildrenChanged = new rx.Ev();\nevents.onElementAttrsChanged = new rx.Ev();\n\nclass RawHtml {\n  constructor(html) {\n    this.html = html;\n  }\n}\n\n// jQuery events are special attrs, along with `init`\n\nlet DOMEvents = [\"blur\", \"change\", \"click\", \"dblclick\", \"error\", \"focus\", \"focusin\",\n  \"focusout\", \"hover\", \"keydown\", \"keypress\", \"keyup\", \"load\", \"mousedown\",\n  \"mouseenter\", \"mouseleave\", \"mousemove\", \"mouseout\", \"mouseover\", \"mouseup\",\n  \"ready\", \"resize\", \"scroll\", \"select\", \"submit\", \"toggle\", \"unload\"];\n\nlet svg_events = [\"click\"];\nlet smushClasses = xs => _(xs).chain().flatten().compact().value().join(\" \").replace(/\\s+/, \" \").trim();\n\nlet specialAttrs = {\n  init(elt, fn) { return fn.call(elt); },\n  style (elt, value) {\n    value = autoFuncBind(value);\n    let isCell = value instanceof rx.ObsCell;\n    return rx.autoSub(rx.cast(value).onSet, ([o, n]) => {\n      if ((n == null) || _.isString(n)) {\n        setProp(elt, \"style\", n);\n      } else {\n        elt.removeAttr(\"style\").css(n);\n      }\n      if (isCell && events.enabled) {\n        return events.onElementAttrsChanged.pub({$element: elt, attr: \"style\"});\n      }\n    });\n  },\n  class (elt, value) {\n    return setDynProp(elt, \"class\", value, function(val) {\n      if (_.isString(val)) { return val; } else { return smushClasses(val); }\n    });\n  }\n};\n\nfor (let ev of DOMEvents) {\n  (ev =>\n    specialAttrs[ev] = function(elt, fn) {\n      if (elt instanceof SVGElement && Array.from(svg_events).includes(ev)) {\n        return elt.addEventListener(ev, fn);\n      } else {\n        return elt[ev](e => fn.call(elt, e));\n      }\n    }\n  )(ev);\n}\n\n// a little underscore-string inlining\nlet trim = $.trim;\n\nlet dasherize = str=> trim(str).replace(/([A-Z])/g, \"-$1\").replace(/[-_\\s]+/g, \"-\").toLowerCase();\n\n// attr vs prop:\n// http://blog.jquery.com/2011/05/10/jquery-1-6-1-rc-1-released/\n// http://api.jquery.com/prop/\n\nlet props = [\"async\", \"autofocus\", \"checked\", \"location\", \"multiple\", \"readOnly\",\n  \"selected\", \"selectedIndex\", \"tagName\", \"nodeName\", \"nodeType\",\n  \"ownerDocument\", \"defaultChecked\", \"defaultSelected\"\n];\nlet propSet = _.object(props.map(prop => [prop, null]));\n\nlet setProp = function(elt, prop, val) {\n  if (elt instanceof SVGElement) {\n    return elt.setAttribute(prop, val);\n  } else if (prop === \"value\") {\n    return elt.val(val);\n  } else if (prop in propSet) {\n    return elt.prop(prop, val);\n  } else {\n    return elt.attr(prop, val);\n  }\n};\n\nlet setDynProp = function(elt, prop, val, xform) {\n  if (xform == null) { xform = _.identity; }\n  val = autoFuncBind(val);\n  if (val instanceof rx.ObsCell) {\n    return rx.autoSub(val.onSet, function([o, n]) {\n      setProp(elt, prop, xform(n));\n      if (events.enabled) {\n        return events.onElementAttrsChanged.pub({$element: elt, attr: prop});\n      }\n    });\n  } else {\n    return setProp(elt, prop, xform(val));\n  }\n};\n\n// arguments to a tag may be:\n//   ()\n//   (attrs: Object)\n//   (contents: Contents)\n//   (attrs: Object, contents: Contents)\n// where Contents is:\n//   string | number | Element | RawHtml | $ | Array | ObsCell | ObsArray\nlet validContents = contents => (\n  _.isString(contents) ||\n  _.isNumber(contents) ||\n  _.isArray(contents) ||\n  _.isBoolean(contents) ||\n  _.isFunction(contents) ||\n  contents instanceof Element ||\n  contents instanceof SVGElement ||\n  contents instanceof RawHtml ||\n  contents instanceof $ ||\n  contents instanceof rx.ObsCell ||\n  contents instanceof rx.ObsArray ||\n  contents instanceof rx.ObsSet\n);\n\nlet normalizeTagArgs = function(...args) {\n  // while not strictly necessary, a great deal of the special-casing in this function is provided\n  // to ensure exact backwards compatibility.\n  // @TODO: Prior to the 3.0.0 release, this should be simplified.\n  args = args.filter(a => a != null);\n  let first = _.first(args);\n  let rest = args.slice(1);\n  if (first == null && !rest.length) {\n    return [{}, null];\n  } else if (validContents(first)) {\n    if(args.length > 1) {\n      return [{}, args];\n    }\n    else {\n      return [{}, first];\n    }\n  } else {\n    if (rest.length === 0) {\n      return [first, null];\n    }\n    else if(rest.length === 1) {\n      return [first, _.first(rest)];\n    }\n    return [first, rest];\n  }\n};\n\nlet toNodes = contents => {\n  let result1 = [];\n  for (let child of Array.from(contents)) {\n    if (child != null) {\n      if (_.isString(child) || _.isNumber(child)) {\n        result1.push(document.createTextNode(child));\n      } else if (child instanceof Element || child instanceof SVGElement) {\n        result1.push(child);\n      } else if (child instanceof RawHtml) {\n        let parsed = $(child.html);\n        if (parsed.length !== 1) { throw new Error(\"RawHtml must wrap a single element\"); }\n        result1.push(parsed[0]);\n      } else if (child instanceof $) {\n        if (child.length !== 1) { throw new Error(\"jQuery object must wrap a single element\"); }\n        result1.push(child[0]);\n      } else {\n        throw new Error(\n          `Unknown element type in array: ${child.constructor.name} (must be string, number, function, \nElement, RawHtml, or jQuery objects)`\n        );\n      }\n    } else {\n      result1.push(undefined);\n    }\n  }\n  return result1;\n};\n\nlet updateContents = function(elt, contents) {\n  if (elt.html) { elt.html(\"\"); }\n  if ((contents == null)) {\n    return;\n  } else if (_.isArray(contents)) {\n    let nodes = toNodes(contents);\n    elt.append(nodes);\n    return nodes;\n  } else if (\n    _.isString(contents) ||\n    _.isNumber(contents) ||\n    _.isBoolean(contents) ||\n      contents instanceof Element ||\n      contents instanceof SVGElement ||\n      contents instanceof RawHtml ||\n      contents instanceof $\n  ) {\n    return updateContents(elt, [contents]);\n  } else {\n    throw new Error(\n      `Unknown type for element contents: ${contents.constructor.name} \n(accepted types: string, number, Element, RawHtml, jQuery object of single element, \nor array of the aforementioned)`\n    );\n  }\n};\n\nconst mktag = tag => (...args) => createTag(tag, ...args);\n\nconst createTag = (tag, ...args) => {\n  let [attrs, contents] = Array.from(normalizeTagArgs(...args));\n  contents = prepContents(contents);\n\n  let elt = $(`<${tag}/>`);\n  attrs = _.mapObject(attrs, (value, key) => {\n    if(key in specialAttrs) return value;\n    else return autoFuncBind(value);\n  });\n  let object = _.omit(attrs, _.keys(specialAttrs));\n  for (let name in object) {\n    let value = object[name];\n    setDynProp(elt, name, value);\n  }\n  if (contents != null) {\n    if (contents instanceof rx.ObsArray) {\n      rx.autoSub(contents.indexed().onChangeCells, function([index, removed, added]) {\n        elt.contents().slice(index, index + removed.length).remove();\n        let toAdd = toNodes(added.map(([cell, icell]) => rx.snap(() => cell.get())));\n        if (index === elt.contents().length) {\n          elt.append(toAdd);\n        } else {\n          elt.contents().eq(index).before(toAdd);\n        }\n        if (events.enabled && (removed.length || toAdd.length)) {\n          events.onElementChildrenChanged.pub({\n            $element: elt,\n            type: \"childrenUpdated\",\n            added: toAdd,\n            removed: toNodes(removed.map(cell => rx.snap(() => cell.get())))\n          });\n        }\n        return (() => {\n          let result1 = [];\n          for (let [cell, icell] of Array.from(added)) {\n            result1.push(((cell, icell) =>\n              rx.autoSub(cell.onSet, rx.skipFirst(([old, val]) => {\n                let ival = rx.snap(() => icell.get());\n                toAdd = toNodes([val]);\n                elt.contents().eq(ival).replaceWith(toAdd);\n                if (events.enabled) {\n                  return events.onElementChildrenChanged.pub({\n                    $element: elt, type: \"childrenUpdated\", updated: toAdd\n                  });\n                }}))\n            )(cell, icell));\n          }\n          return result1;\n        })();\n      });\n    } else {\n      updateContents(elt, contents);\n    }\n  }\n  for (let key in attrs) {\n    if (attrs.hasOwnProperty(key) && specialAttrs.hasOwnProperty(key)) {\n      specialAttrs[key](elt, attrs[key], attrs, contents);\n    }\n  }\n  return elt;\n};\n// From <https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5/HTML5_element_list>\n//\n// Extract with:\n//\n//     \"['\"+document.body.innerText.match(/<.*?>/g).map(function(x){return x.substring(1, x.length-1);}).join(\"', '\")+\"']\";\n\nlet tags = [\"html\", \"head\", \"title\", \"base\", \"link\", \"meta\", \"style\", \"script\",\n  \"noscript\", \"body\", \"body\", \"section\", \"nav\", \"article\", \"aside\", \"h1\", \"h2\",\n  \"h3\", \"h4\", \"h5\", \"h6\", \"h1\", \"h6\", \"header\", \"footer\", \"address\", \"main\",\n  \"main\", \"p\", \"hr\", \"pre\", \"blockquote\", \"ol\", \"ul\", \"li\", \"dl\", \"dt\", \"dd\",\n  \"dd\", \"figure\", \"figcaption\", \"div\", \"a\", \"em\", \"strong\", \"small\", \"s\",\n  \"cite\", \"q\", \"dfn\", \"abbr\", \"data\", \"time\", \"code\", \"var\", \"samp\", \"kbd\",\n  \"sub\", \"sup\", \"i\", \"b\", \"u\", \"mark\", \"ruby\", \"rt\", \"rp\", \"bdi\", \"bdo\",\n  \"span\", \"br\", \"wbr\", \"ins\", \"del\", \"img\", \"iframe\", \"embed\", \"object\",\n  \"param\", \"object\", \"video\", \"audio\", \"source\", \"video\", \"audio\", \"track\",\n  \"video\", \"audio\", \"canvas\", \"map\", \"area\", \"area\", \"map\", \"svg\", \"math\",\n  \"table\", \"caption\", \"colgroup\", \"col\", \"tbody\", \"thead\", \"tfoot\", \"tr\", \"td\",\n  \"th\", \"form\", \"fieldset\", \"legend\", \"fieldset\", \"label\", \"input\", \"button\",\n  \"select\", \"datalist\", \"optgroup\", \"option\", \"select\", \"datalist\", \"textarea\",\n  \"keygen\", \"output\", \"progress\", \"meter\", \"details\", \"summary\", \"details\",\n  \"menuitem\", \"menu\"];\n\n// From <https://developer.mozilla.org/en-US/docs/Web/SVG/Element>\nlet svg_tags = [\"a\", \"altglyph\", \"altglyphdef\", \"altglyphitem\", \"animate\",\n  \"animatecolor\", \"animatemotion\", \"animatetransform\", \"circle\", \"clippath\",\n  \"color-profile\", \"cursor\", \"defs\", \"desc\", \"ellipse\", \"feblend\",\n  \"fecolormatrix\", \"fecomponenttransfer\", \"fecomposite\", \"feconvolvematrix\",\n  \"fediffuselighting\", \"fedisplacementmap\", \"fedistantlight\", \"feflood\",\n  \"fefunca\", \"fefuncb\", \"fefuncg\", \"fefuncr\", \"fegaussianblur\", \"feimage\",\n  \"femerge\", \"femergenode\", \"femorphology\", \"feoffset\", \"fepointlight\",\n  \"fespecularlighting\", \"fespotlight\", \"fetile\", \"feturbulence\", \"filter\",\n  \"font\", \"font-face\", \"font-face-format\", \"font-face-name\", \"font-face-src\",\n  \"font-face-uri\", \"foreignobject\", \"g\", \"glyph\", \"glyphref\", \"hkern\", \"image\",\n  \"line\", \"lineargradient\", \"marker\", \"mask\", \"metadata\", \"missing-glyph\",\n  \"mpath\", \"path\", \"pattern\", \"polygon\", \"polyline\", \"radialgradient\", \"rect\",\n  \"script\", \"set\", \"stop\", \"style\", \"svg\", \"switch\", \"symbol\", \"text\",\n  \"textpath\", \"title\", \"tref\", \"tspan\", \"use\", \"view\", \"vkern\"];\n\nlet updateSVGContents = function(elt, contents) {\n  while (elt.firstChild) { elt.removeChild(elt.firstChild); }\n  if (_.isArray(contents)) {\n    let toAdd = toNodes(contents);\n    return Array.from(toAdd).map((node) => (elt.appendChild(node)));\n  } else if (_.isString(contents) || contents instanceof SVGElement) {\n    return updateSVGContents(elt, [contents]);\n  } else {\n    /*eslint-disable*/\n    console.error(\"updateSVGContents\", elt, contents);\n    /*eslint-enable*/\n    throw `Must wrap contents ${contents} as array or string`;\n  }\n};\n\nlet svg_mktag = tag =>\n  function(...args) {\n    let [attrs, contents] = Array.from(normalizeTagArgs(...args));\n\n    let elt = document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\n    let object = _.omit(attrs, _.keys(specialAttrs));\n    for (let name in object) {\n      let value = object[name];\n      setDynProp(elt, name, value);\n    }\n\n    if(_.isFunction(contents)) {\n      contents = rx.bind(contents);\n    }\n\n    if (contents != null) {\n      if (contents instanceof rx.ObsArray) {\n        contents.onChange.sub(function(...args) {\n          let [index, removed, added] = Array.from(args[0]);\n          for (let i = 0, end = removed.length, asc = 0 <= end; asc ? i < end : i > end; asc ? i++ : i--) { elt.removeChild(elt.childNodes[index]); }\n          let toAdd = toNodes(added);\n          if (index === elt.childNodes.length) {\n            return toAdd.map((node) => elt.appendChild(node));\n          } else {\n            return toAdd.map(node => elt.childNodes[index].insertBefore(node));\n          }\n        });\n      } else if (contents instanceof rx.ObsCell) {\n        contents.onSet.sub(([old, val]) => updateSVGContents(elt, val));\n      } else {\n        updateSVGContents(elt, contents);\n      }\n    }\n\n    for (let key in attrs) {\n      if (key in specialAttrs) {\n        specialAttrs[key](elt, attrs[key], attrs, contents);\n      }\n    }\n    return elt;\n  };\n\ntags = _.object(tags.map(tag => [tag, mktag(tag)]));\nlet {input} = tags;\n\nlet _input = (type, opts) => input(_.extend({type}, opts));\ninput.color = opts => _input(\"color\", opts);\ninput.date = opts => _input(\"date\", opts);\ninput.datetime = opts => _input(\"datetime\", opts);\ninput.datetimeLocal = opts => _input(\"datetime-local\", opts);\ninput.email = opts => _input(\"email\", opts);\ninput.file = opts => _input(\"file\", opts);\ninput.hidden = opts => _input(\"hidden\", opts);\ninput.image = opts => _input(\"image\", opts);\ninput.month = opts => _input(\"month\", opts);\ninput.number = opts => _input(\"number\", opts);\ninput.password = opts => _input(\"password\", opts);\ninput.range = opts => _input(\"range\", opts);\ninput.reset = opts => _input(\"reset\", opts);\ninput.search = opts => _input(\"search\", opts);\ninput.submit = opts => _input(\"submit\", opts);\ninput.tel = opts => _input(\"tel\", opts);\ninput.text = opts => _input(\"text\", opts);\ninput.time = opts => _input(\"time\", opts);\ninput.url = opts => _input(\"url\", opts);\ninput.week = opts => _input(\"week\", opts);\n\nlet swapChecked = function($input) {\n  /*\n  Swaps $input.prop so that, whenever $input.prop(\"checked\", ...) is called to set whether $input\n  is checked, we also update the content of $input.rx(\"checked\") with the same.\n  */\n  $input._oldProp = $input.prop;\n  $input.prop = function(...args) {\n    let res = $input._oldProp(...Array.from(args || []));\n    if ((args.length > 1) && (args[0] === \"checked\")) {\n      $input.rx(\"checked\").set($input.prop(\"checked\"));\n    }\n    return res;\n  };\n  return $input;\n};\n\ninput.checkbox = opts =>\n  /*\n  A checkbox with a default property `data-unchecked-value` of \"false\".  This is so that if you\n  use $.serializeJSON() to read the value of this checkbox in a form, the value will be false\n  if it is unchecked.\n  */\n  swapChecked(input(_.extend({type: \"checkbox\"}, opts)))\n;\n\ninput.radio = (opts => swapChecked(input(_.extend({type: \"radio\"}, opts))));\n\nsvg_tags = _.object(svg_tags.map(svg_tag => [svg_tag, svg_mktag(svg_tag)]));\n\nlet rawHtml = html => new RawHtml(html);\nlet specialChar = function(code, tag) { if (tag == null) { tag = \"span\"; } return rawHtml(`<${tag}>&${code};</${tag}>`); };\nlet unicodeChar = function(code, tag) { if (tag == null) { tag = \"span\"; } return rawHtml(`<${tag}>\\\\u${code};</${tag}>`); };\n\n//\n// rxt utilities\n//\nspecialAttrs.class = (elt, value) =>\n  setDynProp(elt, \"class\", value, function(val) {\n    if (_.isString(val)) { return val; } else { return smushClasses(val); }\n  })\n;\n\nspecialAttrs.className = specialAttrs.class;\n\nfunction createElement(elemType, props, ...contents) {\n  if(_.isString(elemType)) {\n    return createTag(elemType, props, ...contents);\n  } else if (\n    _.isObject(elemType) &&\n    elemType.prototype &&\n    _.isFunction(elemType.prototype.render)\n  ) {\n    return new elemType(props, ...contents).render();\n  } else if (_.isFunction(elemType)) {\n    return elemType(props, ...contents);\n  } else {\n    throw Error(`Cannot create element ${elemType}!`);\n  }\n}\n\nexport * from \"bobtail-rx\";\nexport let rxt = {\n  events, RawHtml, specialAttrs, mktag, svg_mktag, tags, svg_tags, rawHtml, specialChar,\n  unicodeChar, trim, dasherize, smushClasses, normalizeTagArgs, flattenWeb, rxtFlattenHelper,\n  createElement\n};"]}