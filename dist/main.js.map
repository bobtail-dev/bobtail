{"version":3,"sources":["../src/main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import $ from 'jquery';\nimport 'es5-shim';\nimport 'es6-shim';\nimport _ from 'underscore';\nimport * as rx from 'bobtail-rx';\n\nlet mktag, radio;\nlet prop, tag;\n$.fn.rx = function(prop) {\n  let map = this.data('rx-map');\n  if ((map == null)) { this.data('rx-map', (map = Object.create(null))); }\n  if (prop in map) { return map[prop]; }\n  return map[prop] =\n    (() => { switch (prop) {\n      case 'focused':\n        let focused = rx.cell(this.is(':focus'));\n        this.focus(() => focused.set(true));\n        this.blur(() => focused.set(false));\n        return focused;\n      case 'val':\n        let val = rx.cell(this.val());\n        this.change(() => val.set(this.val()));\n        this.on('input', () => val.set(this.val()));\n        return val;\n      case 'checked':\n        let checked = rx.cell(this.is(':checked'));\n        this.change(() => checked.set(this.is(':checked')));\n        return checked;\n      default:\n        throw new Error('Unknown reactive property type');\n    } })();\n};\n\n//\n// reactive template DSL\n//\n\nlet prepContents = function(contents) {\n  if (contents instanceof rx.ObsCell || contents instanceof rx.ObsArray || _.isArray(contents)) {\n    contents = rx.flatten(contents);\n  }\n  return contents;\n};\n\nlet events = {};\nevents.enabled = false;\nevents.onElementChildrenChanged = new rx.Ev();\nevents.onElementAttrsChanged = new rx.Ev();\n\nclass RawHtml {\n  constructor(html) {\n    this.html = html;\n  }\n}\n\n// jQuery events are special attrs, along with `init`\n\nlet DOMEvents = [\"blur\", \"change\", \"click\", \"dblclick\", \"error\", \"focus\", \"focusin\",\n  \"focusout\", \"hover\", \"keydown\", \"keypress\", \"keyup\", \"load\", \"mousedown\",\n  \"mouseenter\", \"mouseleave\", \"mousemove\", \"mouseout\", \"mouseover\", \"mouseup\",\n  \"ready\", \"resize\", \"scroll\", \"select\", \"submit\", \"toggle\", \"unload\"];\n\nlet svg_events = [\"click\"];\n\nlet specialAttrs = {\n  init(elt, fn) { return fn.call(elt); }\n};\n\nfor (let ev of Array.from(DOMEvents)) {\n  (ev =>\n    specialAttrs[ev] = function(elt, fn) {\n      if (elt instanceof SVGElement && Array.from(svg_events).includes(ev)) {\n        return elt.addEventListener(ev, fn);\n      } else {\n        return elt[ev](e => fn.call(elt, e));\n      }\n    }\n  )(ev);\n}\n\n// attr vs prop:\n// http://blog.jquery.com/2011/05/10/jquery-1-6-1-rc-1-released/\n// http://api.jquery.com/prop/\n\nlet props = ['async', 'autofocus', 'checked', 'location', 'multiple', 'readOnly',\n  'selected', 'selectedIndex', 'tagName', 'nodeName', 'nodeType',\n  'ownerDocument', 'defaultChecked', 'defaultSelected'];\nlet propSet = _.object((() => {\n  let result = [];\n  for (prop of Array.from(props)) {       result.push([prop, null]);\n  }\n  return result;\n})());\n\nlet setProp = function(elt, prop, val) {\n  if (elt instanceof SVGElement) {\n    return elt.setAttribute(prop, val);\n  } else if (prop === 'value') {\n    return elt.val(val);\n  } else if (prop in propSet) {\n    return elt.prop(prop, val);\n  } else {\n    return elt.attr(prop, val);\n  }\n};\n\nlet setDynProp = function(elt, prop, val, xform) {\n  if (xform == null) { xform = _.identity; }\n  if (val instanceof rx.ObsCell) {\n    return rx.autoSub(val.onSet, function(...args) {\n      let [o,n] = Array.from(args[0]);\n      setProp(elt, prop, xform(n));\n      if (events.enabled) {\n        return events.onElementAttrsChanged.pub({$element: elt, attr: prop});\n      }\n  });\n  } else {\n    return setProp(elt, prop, xform(val));\n  }\n};\n\n// arguments to a tag may be:\n//   ()\n//   (attrs: Object)\n//   (contents: Contents)\n//   (attrs: Object, contents: Contents)\n// where Contents is:\n//   string | number | Element | RawHtml | $ | Array | ObsCell | ObsArray\nlet normalizeTagArgs = function(arg1, arg2) {\n  if ((arg1 == null) && (arg2 == null)) {\n    return [{}, null];\n  } else if (arg1 instanceof Object && (arg2 != null)) {\n    return [arg1, arg2];\n  } else if (((arg2 == null) &&\n      _.isString(arg1)) ||\n      _.isNumber(arg1) ||\n      arg1 instanceof Element ||\n      arg1 instanceof SVGElement ||\n      arg1 instanceof RawHtml ||\n      arg1 instanceof $ ||\n      _.isArray(arg1) ||\n      arg1 instanceof rx.ObsCell ||\n      arg1 instanceof rx.ObsArray ||\n      arg1 instanceof rx.ObsSet) {\n    return [{}, arg1];\n  } else {\n    return [arg1, null];\n  }\n};\n\nlet toNodes = contents =>\n  (() => {\n    let result1 = [];\n    for (let child of Array.from(contents)) {\n      if (child != null) {\n        if (_.isString(child) || _.isNumber(child)) {\n          result1.push(document.createTextNode(child));\n        } else if (child instanceof Element || child instanceof SVGElement) {\n          result1.push(child);\n        } else if (child instanceof RawHtml) {\n          let parsed = $(child.html);\n          if (parsed.length !== 1) { throw new Error('RawHtml must wrap a single element'); }\n          result1.push(parsed[0]);\n        } else if (child instanceof $) {\n          if (child.length !== 1) { throw new Error('jQuery object must wrap a single element'); }\n          result1.push(child[0]);\n        } else {\n          throw new Error(`Unknown element type in array: ${child.constructor.name} (must be string, number, Element, RawHtml, or jQuery objects)`);\n        }\n      } else {\n        result1.push(undefined);\n      }\n    }\n    return result1;\n  })()\n;\n\nlet updateContents = function(elt, contents) {\n  let node;\n  if (elt.html) { elt.html(''); }\n  if ((contents == null)) {\n    return;\n  } else if (_.isArray(contents)) {\n    let nodes = toNodes(contents);\n    elt.append(nodes);\n    if (false) { // this is super slow\n      let hasWidth = function(node) {\n        try { return ($(node).width() != null) !== 0; }\n        catch (e) { return false; }\n      };\n      let covers = (() => {\n        let result1 = [];\n        for (node of Array.from(nodes != null ? nodes : [])) {\n          if (hasWidth(node)) {\n            let {left, top} = $(node).offset();\n            result1.push($('<div/>').appendTo($('body').first())\n              .addClass('updated-element').offset({top,left})\n              .width($(node).width()).height($(node).height()));\n          }\n        }\n        return result1;\n      })();\n      setTimeout((() => Array.from(covers).map((cover) => $(cover).remove())), 2000);\n    }\n    return nodes;\n  } else if (_.isString(contents) || _.isNumber(contents) || contents instanceof Element ||\n      contents instanceof SVGElement || contents instanceof RawHtml || contents instanceof $) {\n    return updateContents(elt, [contents]);\n  } else {\n    throw new Error(`Unknown type for element contents: ${contents.constructor.name} (accepted types: string, number, Element, RawHtml, jQuery object of single element, or array of the aforementioned)`);\n  }\n};\n\nmktag = tag =>\n  function(arg1, arg2) {\n    let [attrs, contents] = Array.from(normalizeTagArgs(arg1, arg2));\n    contents = prepContents(contents);\n\n    let elt = $(`<${tag}/>`);\n    let object = _.omit(attrs, _.keys(specialAttrs));\n    for (let name in object) {\n      let value = object[name];\n      setDynProp(elt, name, value);\n    }\n    if (contents != null) {\n      if (contents instanceof rx.ObsArray) {\n        rx.autoSub(contents.indexed().onChangeCells, function(...args) {\n          let [index, removed, added] = Array.from(args[0]);\n          elt.contents().slice(index, index + removed.length).remove();\n          let toAdd = toNodes(added.map(function(...args1) { let cell, icell; [cell, icell] = Array.from(args1[0]); return rx.snap(() => cell.get()); }));\n          if (index === elt.contents().length) {\n            elt.append(toAdd);\n          } else {\n            elt.contents().eq(index).before(toAdd);\n          }\n          if (events.enabled && (removed.length || toAdd.length)) {\n            events.onElementChildrenChanged.pub({\n              $element: elt,\n              type: \"childrenUpdated\",\n              added: toAdd,\n              removed: toNodes(removed.map(cell => rx.snap(() => cell.get())))\n            });\n          }\n          return (() => {\n            let result1 = [];\n            for (let [cell, icell] of Array.from(added)) {\n              result1.push(((cell, icell) =>\n                rx.autoSub(cell.onSet, rx.skipFirst(function(...args1) {\n                  let [old, val] = Array.from(args1[0]);\n                  let ival = rx.snap(() => icell.get());\n                  toAdd = toNodes([val]);\n                  elt.contents().eq(ival).replaceWith(toAdd);\n                  if (events.enabled) {\n                    return events.onElementChildrenChanged.pub({\n                      $element: elt, type: \"childrenUpdated\", updated: toAdd\n                    });\n                  }}))\n              )(cell, icell));\n            }\n            return result1;\n          })();\n      });\n      } else {\n        updateContents(elt, contents);\n      }\n    }\n    for (let key in attrs) {\n      if (key in specialAttrs) {\n        specialAttrs[key](elt, attrs[key], attrs, contents);\n      }\n    }\n    return elt;\n  };\n\n// From <https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5/HTML5_element_list>\n//\n// Extract with:\n//\n//     \"['\"+document.body.innerText.match(/<.*?>/g).map(function(x){return x.substring(1, x.length-1);}).join(\"', '\")+\"']\";\n\nlet tags = ['html', 'head', 'title', 'base', 'link', 'meta', 'style', 'script',\n  'noscript', 'body', 'body', 'section', 'nav', 'article', 'aside', 'h1', 'h2',\n  'h3', 'h4', 'h5', 'h6', 'h1', 'h6', 'header', 'footer', 'address', 'main',\n  'main', 'p', 'hr', 'pre', 'blockquote', 'ol', 'ul', 'li', 'dl', 'dt', 'dd',\n  'dd', 'figure', 'figcaption', 'div', 'a', 'em', 'strong', 'small', 's',\n  'cite', 'q', 'dfn', 'abbr', 'data', 'time', 'code', 'var', 'samp', 'kbd',\n  'sub', 'sup', 'i', 'b', 'u', 'mark', 'ruby', 'rt', 'rp', 'bdi', 'bdo',\n  'span', 'br', 'wbr', 'ins', 'del', 'img', 'iframe', 'embed', 'object',\n  'param', 'object', 'video', 'audio', 'source', 'video', 'audio', 'track',\n  'video', 'audio', 'canvas', 'map', 'area', 'area', 'map', 'svg', 'math',\n  'table', 'caption', 'colgroup', 'col', 'tbody', 'thead', 'tfoot', 'tr', 'td',\n  'th', 'form', 'fieldset', 'legend', 'fieldset', 'label', 'input', 'button',\n  'select', 'datalist', 'optgroup', 'option', 'select', 'datalist', 'textarea',\n  'keygen', 'output', 'progress', 'meter', 'details', 'summary', 'details',\n  'menuitem', 'menu'];\n\n// From <https://developer.mozilla.org/en-US/docs/Web/SVG/Element>\nlet svg_tags = ['a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animate',\n  'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath',\n  'color-profile', 'cursor', 'defs', 'desc', 'ellipse', 'feblend',\n  'fecolormatrix', 'fecomponenttransfer', 'fecomposite', 'feconvolvematrix',\n  'fediffuselighting', 'fedisplacementmap', 'fedistantlight', 'feflood',\n  'fefunca', 'fefuncb', 'fefuncg', 'fefuncr', 'fegaussianblur', 'feimage',\n  'femerge', 'femergenode', 'femorphology', 'feoffset', 'fepointlight',\n  'fespecularlighting', 'fespotlight', 'fetile', 'feturbulence', 'filter',\n  'font', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src',\n  'font-face-uri', 'foreignobject', 'g', 'glyph', 'glyphref', 'hkern', 'image',\n  'line', 'lineargradient', 'marker', 'mask', 'metadata', 'missing-glyph',\n  'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect',\n  'script', 'set', 'stop', 'style', 'svg', 'switch', 'symbol', 'text',\n  'textpath', 'title', 'tref', 'tspan', 'use', 'view', 'vkern'];\n\nlet updateSVGContents = function(elt, contents) {\n  while (elt.firstChild) { elt.removeChild(elt.firstChild); }\n  if (_.isArray(contents)) {\n    let toAdd = toNodes(contents);\n    return Array.from(toAdd).map((node) => (elt.appendChild(node)));\n  } else if (_.isString(contents) || contents instanceof SVGElement) {\n    return updateSVGContents(elt, [contents]);\n  } else {\n    console.error('updateSVGContents', elt, contents);\n    throw `Must wrap contents ${contents} as array or string`;\n  }\n};\n\nlet svg_mktag = tag =>\n  function(arg1, arg2) {\n    let [attrs, contents] = Array.from(normalizeTagArgs(arg1, arg2));\n\n    let elt = document.createElementNS('http://www.w3.org/2000/svg', tag);\n    let object = _.omit(attrs, _.keys(specialAttrs));\n    for (let name in object) {\n      let value = object[name];\n      setDynProp(elt, name, value);\n    }\n\n    if (contents != null) {\n      if (contents instanceof rx.ObsArray) {\n        contents.onChange.sub(function(...args) {\n          let node;\n          let [index, removed, added] = Array.from(args[0]);\n          for (let i = 0, end = removed.length, asc = 0 <= end; asc ? i < end : i > end; asc ? i++ : i--) { elt.removeChild(elt.childNodes[index]); }\n          let toAdd = toNodes(added);\n          if (index === elt.childNodes.length) {\n            return (() => {\n              let result1 = [];\n              for (node of Array.from(toAdd)) {                   result1.push((elt.appendChild(node)));\n              }\n              return result1;\n            })();\n          } else {\n            return (() => {\n              let result2 = [];\n              for (node of Array.from(toAdd)) {                   result2.push((elt.childNodes[index].insertBefore(node)));\n              }\n              return result2;\n            })();\n          }\n        });\n      } else if (contents instanceof rx.ObsCell) {\n        contents.onSet.sub(function(...args) { let [old, val] = Array.from(args[0]); return updateSVGContents(elt, val); });\n      } else {\n        updateSVGContents(elt, contents);\n      }\n    }\n\n    for (let key in attrs) {\n      if (key in specialAttrs) {\n        specialAttrs[key](elt, attrs[key], attrs, contents);\n      }\n    }\n    return elt;\n  };\n\ntags = _.object(tags.map(tag => [tag, mktag(tag)]));\nlet {input} = tags;\n\nlet _input = (type, opts) => input(_.extend({type}, opts));\ninput.color = opts => _input('color', opts);\ninput.date = opts => _input('date', opts);\ninput.datetime = opts => _input('datetime', opts);\ninput.datetimeLocal = opts => _input('datetime-local', opts);\ninput.email = opts => _input('email', opts);\ninput.file = opts => _input('file', opts);\ninput.hidden = opts => _input('hidden', opts);\ninput.image = opts => _input('image', opts);\ninput.month = opts => _input('month', opts);\ninput.number = opts => _input('number', opts);\ninput.password = opts => _input('password', opts);\ninput.range = opts => _input('range', opts);\ninput.reset = opts => _input('reset', opts);\ninput.search = opts => _input('search', opts);\ninput.submit = opts => _input('submit', opts);\ninput.tel = opts => _input('tel', opts);\ninput.text = opts => _input('text', opts);\ninput.time = opts => _input('time', opts);\ninput.url = opts => _input('url', opts);\ninput.week = opts => _input('week', opts);\n\nlet swapChecked = function($input) {\n  /*\n  Swaps $input.prop so that, whenever $input.prop(\"checked\", ...) is called to set whether $input\n  is checked, we also update the content of $input.rx(\"checked\") with the same.\n  */\n  $input._oldProp = $input.prop;\n  $input.prop = function(...args) {\n    let res = $input._oldProp(...Array.from(args || []));\n    if ((args.length > 1) && (args[0] === \"checked\")) {\n      $input.rx(\"checked\").set($input.prop(\"checked\"));\n    }\n    return res;\n  };\n  return $input;\n};\n\ninput.checkbox = opts =>\n  /*\n  A checkbox with a default property `data-unchecked-value` of \"false\".  This is so that if you\n  use $.serializeJSON() to read the value of this checkbox in a form, the value will be false\n  if it is unchecked.\n  */\n  swapChecked(input(_.extend({type: \"checkbox\"}, opts)))\n;\n\ninput.radio = (radio = opts => swapChecked(input(_.extend({type: \"radio\"}, opts))));\n\nsvg_tags = _.object(svg_tags.map(svg_tag => [svg_tag, svg_mktag(svg_tag)]));\n\nlet rawHtml = html => new RawHtml(html);\nlet specialChar = function(code, tag) { if (tag == null) { tag = 'span'; } return rawHtml(`<${tag}>&${code};</${tag}>`); };\nlet unicodeChar = function(code, tag) { if (tag == null) { tag = 'span'; } return rawHtml(`<${tag}>\\\\u${code};</${tag}>`); };\nlet importTags = x => _(x != null ? x : this).extend(tags);\n//\n// rxt utilities\n//\n\nlet cast = function(value, type) {\n  if (type == null) { type = \"cell\"; }\n  console.warn(\"Warning: rx.rxt.cast is deprecated. Use rx.cast instead.\");\n  return rx.cast(value, type);\n};\n\n// a little underscore-string inlining\nlet trim = $.trim;\n\nlet dasherize = str=> trim(str).replace(/([A-Z])/g, '-$1').replace(/[-_\\s]+/g, '-').toLowerCase();\n\nlet cssify = function(map) {\n  console.warn('cssify is deprecated; set the `style` property directly to a JSON object.');\n  return ((() => {\n    let result3 = [];\n\n    for (let k in map) {\n      let v = map[k];\n      if (v != null) {\n        result3.push(`${dasherize(k)}: ${_.isNumber(v) ? v+'px' : v};`);\n      }\n    }\n\n    return result3;\n  })()).join(' ');\n};\n\nspecialAttrs.style = function(elt, value) {\n  let isCell = value instanceof rx.ObsCell;\n  return rx.autoSub(rx.cast(value).onSet, function(...args) {\n    let [o,n] = Array.from(args[0]);\n    if ((n == null) || _.isString(n)) {\n      setProp(elt, 'style', n);\n    } else {\n      elt.removeAttr('style').css(n);\n    }\n    if (isCell && events.enabled) {\n      return events.onElementAttrsChanged.pub({$element: elt, attr: \"style\"});\n    }\n});\n};\n\nlet smushClasses = xs => _(xs).chain().flatten().compact().value().join(' ').replace(/\\s+/, ' ').trim();\n\nspecialAttrs.class = (elt, value) =>\n  setDynProp(elt, 'class', value, function(val) {\n    if (_.isString(val)) { return val; } else { return smushClasses(val); }\n  })\n;\n\nexport * from 'bobtail-rx';\nexport let rxt = {\n  events, RawHtml, specialAttrs, mktag, svg_mktag, tags, svg_tags, rawHtml, specialChar, unicodeChar,\n  importTags, cast, trim, dasherize, cssify, smushClasses\n};"]}